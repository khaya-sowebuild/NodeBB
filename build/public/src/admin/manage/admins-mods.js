"use strict";define("admin/manage/admins-mods",["translator","benchpress","autocomplete"],function(e,a,r){var s={};s.init=function(){r.user($("#admin-search"),function(e,a){socket.emit("admin.user.makeAdmins",[a.item.user.uid],function(e){if(e){return app.alertError(e.message)}app.alertSuccess("[[admin/manage/users:alerts.make-admin-success]]");$("#admin-search").val("");if($('.administrator-area [data-uid="'+a.item.user.uid+'"]').length){return}app.parseAndTranslate("admin/manage/admins-mods","admins.members",{admins:{members:[a.item.user]}},function(e){$(".administrator-area").prepend(e)})})});$(".administrator-area").on("click",".remove-user-icon",function(){var e=$(this).parents("[data-uid]");var a=e.attr("data-uid");if(parseInt(a,10)===parseInt(app.user.uid,10)){return app.alertError("[[admin/manage/users:alerts.no-remove-yourself-admin]]")}bootbox.confirm("[[admin/manage/users:alerts.confirm-remove-admin]]",function(r){if(r){socket.emit("admin.user.removeAdmins",[a],function(a){if(a){return app.alertError(a.message)}app.alertSuccess("[[admin/manage/users:alerts.remove-admin-success]]");e.remove()})}})});r.user($("#global-mod-search"),function(e,a){socket.emit("admin.groups.join",{groupName:"Global Moderators",uid:a.item.user.uid},function(e){if(e){return app.alertError(e.message)}app.alertSuccess("[[admin/manage/users:alerts.make-global-mod-success]]");$("#global-mod-search").val("");if($('.global-moderator-area [data-uid="'+a.item.user.uid+'"]').length){return}app.parseAndTranslate("admin/manage/admins-mods","globalMods.members",{globalMods:{members:[a.item.user]}},function(e){$(".global-moderator-area").prepend(e);$("#no-global-mods-warning").addClass("hidden")})})});$(".global-moderator-area").on("click",".remove-user-icon",function(){var e=$(this).parents("[data-uid]");var a=e.attr("data-uid");bootbox.confirm("[[admin/manage/users:alerts.confirm-remove-global-mod]]",function(r){if(r){socket.emit("admin.groups.leave",{uid:a,groupName:"Global Moderators"},function(a){if(a){return app.alertError(a.message)}app.alertSuccess("[[admin/manage/users:alerts.remove-global-mod-success]]");e.remove();if(!$(".global-moderator-area").children().length){$("#no-global-mods-warning").removeClass("hidden")}})}})});r.user($(".moderator-search"),function(e,a){var r=$(e.target);var s=$(e.target).attr("data-cid");socket.emit("admin.categories.setPrivilege",{cid:s,privilege:["moderate"],set:true,member:a.item.user.uid},function(e){if(e){return app.alertError(e.message)}app.alertSuccess("[[admin/manage/users:alerts.make-moderator-success]]");r.val("");if($('.moderator-area[data-cid="'+s+'"] [data-uid="'+a.item.user.uid+'"]').length){return}app.parseAndTranslate("admin/manage/admins-mods","globalMods",{globalMods:[a.item.user]},function(e){$('.moderator-area[data-cid="'+s+'"]').prepend(e);$('.no-moderator-warning[data-cid="'+s+'"]').addClass("hidden")})})});$(".moderator-area").on("click",".remove-user-icon",function(){var e=$(this).parents("[data-cid]");var a=e.attr("data-cid");var r=$(this).parents("[data-uid]");var s=r.attr("data-uid");bootbox.confirm("[[admin/manage/users:alerts.confirm-remove-moderator]]",function(t){if(t){socket.emit("admin.categories.setPrivilege",{cid:a,privilege:["moderate"],set:false,member:s},function(s){if(s){return app.alertError(s.message)}app.alertSuccess("[[admin/manage/users:alerts.remove-moderator-success]]");r.remove();if(!e.children().length){$('.no-moderator-warning[data-cid="'+a+'"]').removeClass("hidden")}})}})})};return s});
//# sourceMappingURL=public/src/admin/manage/admins-mods.js.map