{"version":3,"sources":["public/src/client/account/categories.js"],"names":["define","header","Categories","init","ajaxify","data","categories","forEach","category","handleIgnoreWatch","cid","$","find","on","$this","this","command","attr","socket","emit","uid","err","modified_cids","app","alertError","message","toggleClass","alertSuccess"],"mappings":"AAAA,aAGAA,OAAO,4BAA6B,wBAAyB,SAAUC,GACtE,IAAIC,KAEJA,EAAWC,KAAO,WACjBF,EAAOE,OAEPC,QAAQC,KAAKC,WAAWC,QAAQ,SAAUC,GACzCC,EAAkBD,EAASE,QAI7B,SAASD,EAAkBC,GAC1B,IAAIF,EAAWG,EAAE,cAAgBD,EAAM,MACvCF,EAASI,KAAK,oEAAoEC,GAAG,QAAS,WAC7F,IAAIC,EAAQH,EAAEI,MACd,IAAIC,EAAUF,EAAMG,KAAK,eAAiB,oBAAsB,QAAU,SAE1EC,OAAOC,KAAK,cAAgBH,GAAWN,IAAKA,EAAKU,IAAKhB,QAAQC,KAAKe,KAAO,SAAUC,EAAKC,GACxF,GAAID,EAAK,CACR,OAAOE,IAAIC,WAAWH,EAAII,SAG3BH,EAAcf,QAAQ,SAAUG,GAC/B,IAAIF,EAAWG,EAAE,cAAgBD,EAAM,MACvCF,EAASI,KAAK,wCAAwCc,YAAY,SAAUV,IAAY,SACxFR,EAASI,KAAK,yCAAyCc,YAAY,WAAYV,IAAY,SAE3FR,EAASI,KAAK,wCAAwCc,YAAY,SAAUV,IAAY,UACxFR,EAASI,KAAK,yCAAyCc,YAAY,WAAYV,IAAY,YAG5FO,IAAII,aAAa,cAAgBX,EAAU,kBAK9C,OAAOd","file":"public/src/client/account/categories.js","sourcesContent":["'use strict';\r\n\r\n\r\ndefine('forum/account/categories', ['forum/account/header'], function (header) {\r\n\tvar Categories = {};\r\n\r\n\tCategories.init = function () {\r\n\t\theader.init();\r\n\r\n\t\tajaxify.data.categories.forEach(function (category) {\r\n\t\t\thandleIgnoreWatch(category.cid);\r\n\t\t});\r\n\t};\r\n\r\n\tfunction handleIgnoreWatch(cid) {\r\n\t\tvar category = $('[data-cid=\"' + cid + '\"]');\r\n\t\tcategory.find('[component=\"category/watching\"], [component=\"category/ignoring\"]').on('click', function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tvar command = $this.attr('component') === 'category/watching' ? 'watch' : 'ignore';\r\n\r\n\t\t\tsocket.emit('categories.' + command, { cid: cid, uid: ajaxify.data.uid }, function (err, modified_cids) {\r\n\t\t\t\tif (err) {\r\n\t\t\t\t\treturn app.alertError(err.message);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmodified_cids.forEach(function (cid) {\r\n\t\t\t\t\tvar category = $('[data-cid=\"' + cid + '\"]');\r\n\t\t\t\t\tcategory.find('[component=\"category/watching/menu\"]').toggleClass('hidden', command !== 'watch');\r\n\t\t\t\t\tcategory.find('[component=\"category/watching/check\"]').toggleClass('fa-check', command === 'watch');\r\n\r\n\t\t\t\t\tcategory.find('[component=\"category/ignoring/menu\"]').toggleClass('hidden', command !== 'ignore');\r\n\t\t\t\t\tcategory.find('[component=\"category/ignoring/check\"]').toggleClass('fa-check', command === 'ignore');\r\n\t\t\t\t});\r\n\r\n\t\t\t\tapp.alertSuccess('[[category:' + command + '.message]]');\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\treturn Categories;\r\n});\r\n"]}