{"version":3,"sources":["public/src/client/account/posts.js"],"names":["define","header","infinitescroll","AccountPosts","method","template","init","$","addClass","handleInfiniteScroll","_method","_template","config","usePagination","loadMore","direction","uid","ajaxify","data","theirid","after","attr","done","posts","length","onPostsLoaded","nextStart","callback","app","parseAndTranslate","html","append","find","timeago","createUserTooltips","utils","makeNumbersHumanReadable"],"mappings":"AAAA,aAGAA,OAAO,uBAAwB,uBAAwB,wBAAyB,SAAUC,EAAQC,GACjG,IAAIC,KACJ,IAAIC,EACJ,IAAIC,EAEJF,EAAaG,KAAO,WACnBL,EAAOK,OAEPC,EAAE,uDAAuDC,SAAS,kBAElEL,EAAaM,qBAAqB,0BAA2B,kBAG9DN,EAAaM,qBAAuB,SAAUC,EAASC,GACtDP,EAASM,EACTL,EAAWM,EACX,IAAKC,OAAOC,cAAe,CAC1BX,EAAeI,KAAKQ,KAItB,SAASA,EAASC,GACjB,GAAIA,EAAY,EAAG,CAClB,OAGDb,EAAeY,SAASV,GACvBY,IAAKC,QAAQC,KAAKC,QAClBC,MAAOb,EAAE,uBAAuBc,KAAK,mBACnC,SAAUH,EAAMI,GAClB,GAAIJ,EAAKK,OAASL,EAAKK,MAAMC,OAAQ,CACpCC,EAAcP,EAAKK,MAAOD,OACpB,CACNA,IAEDf,EAAE,uBAAuBc,KAAK,iBAAkBH,EAAKQ,aAIvD,SAASD,EAAcF,EAAOI,GAC7BC,IAAIC,kBAAkBxB,EAAU,SAAWkB,MAAOA,GAAS,SAAUO,GACpEvB,EAAE,uBAAuBwB,OAAOD,GAChCA,EAAKE,KAAK,4BAA4BxB,SAAS,kBAC/CsB,EAAKE,KAAK,YAAYC,UACtBL,IAAIM,qBACJC,MAAMC,yBAAyBN,EAAKE,KAAK,2BACzCL,MAIF,OAAOxB","file":"public/src/client/account/posts.js","sourcesContent":["'use strict';\r\n\r\n\r\ndefine('forum/account/posts', ['forum/account/header', 'forum/infinitescroll'], function (header, infinitescroll) {\r\n\tvar AccountPosts = {};\r\n\tvar method;\r\n\tvar template;\r\n\r\n\tAccountPosts.init = function () {\r\n\t\theader.init();\r\n\r\n\t\t$('[component=\"post/content\"] img:not(.not-responsive)').addClass('img-responsive');\r\n\r\n\t\tAccountPosts.handleInfiniteScroll('posts.loadMoreUserPosts', 'account/posts');\r\n\t};\r\n\r\n\tAccountPosts.handleInfiniteScroll = function (_method, _template) {\r\n\t\tmethod = _method;\r\n\t\ttemplate = _template;\r\n\t\tif (!config.usePagination) {\r\n\t\t\tinfinitescroll.init(loadMore);\r\n\t\t}\r\n\t};\r\n\r\n\tfunction loadMore(direction) {\r\n\t\tif (direction < 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tinfinitescroll.loadMore(method, {\r\n\t\t\tuid: ajaxify.data.theirid,\r\n\t\t\tafter: $('[component=\"posts\"]').attr('data-nextstart'),\r\n\t\t}, function (data, done) {\r\n\t\t\tif (data.posts && data.posts.length) {\r\n\t\t\t\tonPostsLoaded(data.posts, done);\r\n\t\t\t} else {\r\n\t\t\t\tdone();\r\n\t\t\t}\r\n\t\t\t$('[component=\"posts\"]').attr('data-nextstart', data.nextStart);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction onPostsLoaded(posts, callback) {\r\n\t\tapp.parseAndTranslate(template, 'posts', { posts: posts }, function (html) {\r\n\t\t\t$('[component=\"posts\"]').append(html);\r\n\t\t\thtml.find('img:not(.not-responsive)').addClass('img-responsive');\r\n\t\t\thtml.find('.timeago').timeago();\r\n\t\t\tapp.createUserTooltips();\r\n\t\t\tutils.makeNumbersHumanReadable(html.find('.human-readable-number'));\r\n\t\t\tcallback();\r\n\t\t});\r\n\t}\r\n\r\n\treturn AccountPosts;\r\n});\r\n"]}