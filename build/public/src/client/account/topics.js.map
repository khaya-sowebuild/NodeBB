{"version":3,"sources":["public/src/client/account/topics.js"],"names":["define","header","infinitescroll","AccountTopics","set","init","handleInfiniteScroll","ajaxify","data","theirid","_template","_set","config","usePagination","loadMore","direction","after","$","attr","count","topicsPerPage","done","topics","length","onTopicsLoaded","nextStart","callback","app","parseAndTranslate","html","append","find","timeago","createUserTooltips","utils","makeNumbersHumanReadable","window","trigger"],"mappings":"AAAA,aAGAA,OAAO,wBAAyB,uBAAwB,wBAAyB,SAAUC,EAAQC,GAClG,IAAIC,KACJ,IAAIC,EAEJD,EAAcE,KAAO,WACpBJ,EAAOI,OAEPF,EAAcG,qBAAqB,iBAAkB,OAASC,QAAQC,KAAKC,QAAU,YAGtFN,EAAcG,qBAAuB,SAAUI,EAAWC,GACzDP,EAAMO,EAEN,IAAKC,OAAOC,cAAe,CAC1BX,EAAeG,KAAKS,KAItB,SAASA,EAASC,GACjB,GAAIA,EAAY,EAAG,CAClB,OAGDb,EAAeY,SAAS,0BACvBV,IAAKA,EACLY,MAAOC,EAAE,0BAA0BC,KAAK,kBACxCC,MAAOP,OAAOQ,eACZ,SAAUZ,EAAMa,GAClB,GAAIb,EAAKc,QAAUd,EAAKc,OAAOC,OAAQ,CACtCC,EAAehB,EAAKc,OAAQD,OACtB,CACNA,IAGDJ,EAAE,0BAA0BC,KAAK,iBAAkBV,EAAKiB,aAI1D,SAASD,EAAeF,EAAQI,GAC/BC,IAAIC,kBAAkB,iBAAkB,UAAYN,OAAQA,GAAU,SAAUO,GAC/EZ,EAAE,0BAA0Ba,OAAOD,GACnCA,EAAKE,KAAK,YAAYC,UACtBL,IAAIM,qBACJC,MAAMC,yBAAyBN,EAAKE,KAAK,2BACzCd,EAAEmB,QAAQC,QAAQ,wBAA0Bf,OAAQA,IACpDI,MAIF,OAAOvB","file":"public/src/client/account/topics.js","sourcesContent":["'use strict';\r\n\r\n\r\ndefine('forum/account/topics', ['forum/account/header', 'forum/infinitescroll'], function (header, infinitescroll) {\r\n\tvar AccountTopics = {};\r\n\tvar set;\r\n\r\n\tAccountTopics.init = function () {\r\n\t\theader.init();\r\n\r\n\t\tAccountTopics.handleInfiniteScroll('account/topics', 'uid:' + ajaxify.data.theirid + ':topics');\r\n\t};\r\n\r\n\tAccountTopics.handleInfiniteScroll = function (_template, _set) {\r\n\t\tset = _set;\r\n\r\n\t\tif (!config.usePagination) {\r\n\t\t\tinfinitescroll.init(loadMore);\r\n\t\t}\r\n\t};\r\n\r\n\tfunction loadMore(direction) {\r\n\t\tif (direction < 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tinfinitescroll.loadMore('topics.loadMoreFromSet', {\r\n\t\t\tset: set,\r\n\t\t\tafter: $('[component=\"category\"]').attr('data-nextstart'),\r\n\t\t\tcount: config.topicsPerPage,\r\n\t\t}, function (data, done) {\r\n\t\t\tif (data.topics && data.topics.length) {\r\n\t\t\t\tonTopicsLoaded(data.topics, done);\r\n\t\t\t} else {\r\n\t\t\t\tdone();\r\n\t\t\t}\r\n\r\n\t\t\t$('[component=\"category\"]').attr('data-nextstart', data.nextStart);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction onTopicsLoaded(topics, callback) {\r\n\t\tapp.parseAndTranslate('account/topics', 'topics', { topics: topics }, function (html) {\r\n\t\t\t$('[component=\"category\"]').append(html);\r\n\t\t\thtml.find('.timeago').timeago();\r\n\t\t\tapp.createUserTooltips();\r\n\t\t\tutils.makeNumbersHumanReadable(html.find('.human-readable-number'));\r\n\t\t\t$(window).trigger('action:topics.loaded', { topics: topics });\r\n\t\t\tcallback();\r\n\t\t});\r\n\t}\r\n\r\n\treturn AccountTopics;\r\n});\r\n"]}