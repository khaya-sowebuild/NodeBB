{"version":3,"sources":["public/src/client/popular.js"],"names":["define","recent","components","infinitescroll","Popular","init","app","enterRoom","handleCategorySelection","config","usePagination","loadMoreTopics","direction","$","length","loadMore","after","attr","count","topicsPerPage","cid","utils","params","term","ajaxify","data","selectedTerm","filter","selectedFilter","done","topics","onTopicsLoaded","nextStart"],"mappings":"AAAA,aAGAA,OAAO,iBAAkB,eAAgB,aAAc,wBAAyB,SAAUC,EAAQC,EAAYC,GAC7G,IAAIC,KAEJA,EAAQC,KAAO,WACdC,IAAIC,UAAU,kBAEdN,EAAOO,0BAEP,IAAKC,OAAOC,cAAe,CAC1BP,EAAeE,KAAKM,KAItB,SAASA,EAAeC,GACvB,GAAIA,EAAY,IAAMC,EAAE,0BAA0BC,OAAQ,CACzD,OAGDX,EAAeY,SAAS,gCACvBC,MAAOH,EAAE,0BAA0BI,KAAK,kBACxCC,MAAOT,OAAOU,cACdC,IAAKC,MAAMC,SAASF,IACpBG,KAAMC,QAAQC,KAAKC,aAAaH,KAChCI,OAAQH,QAAQC,KAAKG,eAAeD,QAClC,SAAUF,EAAMI,GAClB,GAAIJ,EAAKK,QAAUL,EAAKK,OAAOhB,OAAQ,CACtCb,EAAO8B,eAAe,UAAWN,EAAKK,OAAQ,MAAOlB,EAAWiB,GAChEhB,EAAE,0BAA0BI,KAAK,iBAAkBQ,EAAKO,eAClD,CACNH,OAKH,OAAOzB","file":"public/src/client/popular.js","sourcesContent":["'use strict';\r\n\r\n\r\ndefine('forum/popular', ['forum/recent', 'components', 'forum/infinitescroll'], function (recent, components, infinitescroll) {\r\n\tvar Popular = {};\r\n\r\n\tPopular.init = function () {\r\n\t\tapp.enterRoom('popular_topics');\r\n\r\n\t\trecent.handleCategorySelection();\r\n\r\n\t\tif (!config.usePagination) {\r\n\t\t\tinfinitescroll.init(loadMoreTopics);\r\n\t\t}\r\n\t};\r\n\r\n\tfunction loadMoreTopics(direction) {\r\n\t\tif (direction < 0 || !$('[component=\"category\"]').length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tinfinitescroll.loadMore('topics.loadMorePopularTopics', {\r\n\t\t\tafter: $('[component=\"category\"]').attr('data-nextstart'),\r\n\t\t\tcount: config.topicsPerPage,\r\n\t\t\tcid: utils.params().cid,\r\n\t\t\tterm: ajaxify.data.selectedTerm.term,\r\n\t\t\tfilter: ajaxify.data.selectedFilter.filter,\r\n\t\t}, function (data, done) {\r\n\t\t\tif (data.topics && data.topics.length) {\r\n\t\t\t\trecent.onTopicsLoaded('popular', data.topics, false, direction, done);\r\n\t\t\t\t$('[component=\"category\"]').attr('data-nextstart', data.nextStart);\r\n\t\t\t} else {\r\n\t\t\t\tdone();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\treturn Popular;\r\n});\r\n"]}