{"version":3,"sources":["public/src/client/tag.js"],"names":["define","recent","infinitescroll","Tag","init","app","enterRoom","$","height","window","children","length","show","on","loadMoreTopics","config","usePagination","direction","loadMore","set","ajaxify","data","tag","after","attr","count","topicsPerPage","done","topics","onTopicsLoaded","hide","nextStart"],"mappings":"AAAA,aAGAA,OAAO,aAAc,eAAgB,wBAAyB,SAAUC,EAAQC,GAC/E,IAAIC,KAEJA,EAAIC,KAAO,WACVC,IAAIC,UAAU,QAEd,GAAIC,EAAE,QAAQC,UAAYD,EAAEE,QAAQD,UAAYD,EAAE,0BAA0BG,WAAWC,QAAU,GAAI,CACpGJ,EAAE,kBAAkBK,OAGrBL,EAAE,kBAAkBM,GAAG,QAAS,WAC/BC,MAGD,IAAKC,OAAOC,cAAe,CAC1Bd,EAAeE,KAAKU,GAGrB,SAASA,EAAeG,GACvB,GAAIA,EAAY,IAAMV,EAAE,0BAA0BI,OAAQ,CACzD,OAGDT,EAAegB,SAAS,0BACvBC,IAAK,OAASC,QAAQC,KAAKC,IAAM,UACjCC,MAAOhB,EAAE,0BAA0BiB,KAAK,kBACxCC,MAAOV,OAAOW,eACZ,SAAUL,EAAMM,GAClB,GAAIN,EAAKO,QAAUP,EAAKO,OAAOjB,OAAQ,CACtCV,EAAO4B,eAAe,MAAOR,EAAKO,OAAQ,MAAOX,EAAWU,OACtD,CACNA,IACApB,EAAE,kBAAkBuB,OAErBvB,EAAE,0BAA0BiB,KAAK,iBAAkBH,EAAKU,eAK3D,OAAO5B","file":"public/src/client/tag.js","sourcesContent":["'use strict';\r\n\r\n\r\ndefine('forum/tag', ['forum/recent', 'forum/infinitescroll'], function (recent, infinitescroll) {\r\n\tvar Tag = {};\r\n\r\n\tTag.init = function () {\r\n\t\tapp.enterRoom('tags');\r\n\r\n\t\tif ($('body').height() <= $(window).height() && $('[component=\"category\"]').children().length >= 20) {\r\n\t\t\t$('#load-more-btn').show();\r\n\t\t}\r\n\r\n\t\t$('#load-more-btn').on('click', function () {\r\n\t\t\tloadMoreTopics();\r\n\t\t});\r\n\r\n\t\tif (!config.usePagination) {\r\n\t\t\tinfinitescroll.init(loadMoreTopics);\r\n\t\t}\r\n\r\n\t\tfunction loadMoreTopics(direction) {\r\n\t\t\tif (direction < 0 || !$('[component=\"category\"]').length) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tinfinitescroll.loadMore('topics.loadMoreFromSet', {\r\n\t\t\t\tset: 'tag:' + ajaxify.data.tag + ':topics',\r\n\t\t\t\tafter: $('[component=\"category\"]').attr('data-nextstart'),\r\n\t\t\t\tcount: config.topicsPerPage,\r\n\t\t\t}, function (data, done) {\r\n\t\t\t\tif (data.topics && data.topics.length) {\r\n\t\t\t\t\trecent.onTopicsLoaded('tag', data.topics, false, direction, done);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdone();\r\n\t\t\t\t\t$('#load-more-btn').hide();\r\n\t\t\t\t}\r\n\t\t\t\t$('[component=\"category\"]').attr('data-nextstart', data.nextStart);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\treturn Tag;\r\n});\r\n"]}