"use strict";define("forum/topic/delete-posts",["components","postSelect"],function(t,e){var i={};var n;var o;var s;i.init=function(){$(".topic").on("click",'[component="topic/delete/posts"]',a);$(window).on("action:ajaxify.start",d)};function d(){p();$(window).off("action:ajaxify.start",d)}function a(){if(n){return}app.parseAndTranslate("partials/delete_posts_modal",{},function(t){n=t;$("body").append(n);o=n.find("#delete_posts_confirm");s=n.find("#purge_posts_confirm");n.find(".close,#delete_posts_cancel").on("click",p);e.init(function(){l();c()});c();o.on("click",function(){r(o,"posts.deletePosts")});s.on("click",function(){r(s,"posts.purgePosts")})})}function r(t,i){t.attr("disabled",true);socket.emit(i,{tid:ajaxify.data.tid,pids:e.pids},function(e){t.removeAttr("disabled");if(e){return app.alertError(e.message)}p()})}function c(){if(e.pids.length){n.find("#pids").translateHtml("[[topic:fork_pid_count, "+e.pids.length+"]]")}else{n.find("#pids").translateHtml("[[topic:fork_no_pids]]")}}function l(){if(e.pids.length){o.removeAttr("disabled");s.removeAttr("disabled")}else{o.attr("disabled",true);s.attr("disabled",true)}}function p(){if(n){n.remove();n=null}e.disable()}return i});
//# sourceMappingURL=public/src/client/topic/delete-posts.js.map