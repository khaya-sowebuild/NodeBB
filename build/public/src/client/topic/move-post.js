"use strict";define("forum/topic/move-post",["components","postSelect"],function(o,t){var n={};var i;var e;n.init=function(){$(".topic").on("click",'[component="topic/move-posts"]',c);$(window).on("action:ajaxify.start",s)};function s(){l();$(window).off("action:ajaxify.start",s)}function c(){n.openMovePostModal()}function p(){if(t.pids.length){i.find("#pids").translateHtml("[[topic:fork_pid_count, "+t.pids.length+"]]")}else{i.find("#pids").translateHtml("[[topic:fork_no_pids]]")}}function a(){if(i.find("#topicId").val().length&&t.pids.length){e.removeAttr("disabled")}else{e.attr("disabled",true)}}n.openMovePostModal=function(o){app.parseAndTranslate("partials/move_post_modal",{},function(n){i=n;e=i.find("#move_posts_confirm");$(document.body).append(i);i.find(".close,#move_posts_cancel").on("click",l);i.find("#topicId").on("keyup",a);t.init(d);p();if(o){t.togglePostSelection(o,d)}e.on("click",function(){f()})})};function d(){a();p()}function f(){var n=i.find("#topicId").val();socket.emit("posts.movePosts",{pids:t.pids,tid:n},function(n){if(n){return app.alertError(n.message)}t.pids.forEach(function(t){o.get("post","pid",t).fadeOut(500,function(){$(this).remove()})});l()})}function l(){if(i){i.remove();i=null}t.disable()}return n});
//# sourceMappingURL=public/src/client/topic/move-post.js.map