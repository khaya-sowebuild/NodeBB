{"version":3,"sources":["public/src/modules/categorySelector.js"],"names":["define","Benchpress","translator","categorySelector","selectedCategory","el","init","_el","callback","on","categoryEl","$","this","selectCategory","attr","getSelectedCategory","cid","find","name","html","modal","categories","ajaxify","data","allCategories","parse","translate","bootbox","dialog","title","message","buttons","save","label","className","submit","ev","preventDefault"],"mappings":"AAAA,aAEAA,OAAO,oBAAqB,aAAc,cAAe,SAAUC,EAAYC,GAC9E,IAAIC,KACJ,IAAIC,EACJ,IAAIC,EACJF,EAAiBG,KAAO,SAAUC,EAAKC,GACtCA,EAAWA,GAAY,aACvBH,EAAKE,EACLH,EAAmB,KACnBC,EAAGI,GAAG,QAAS,aAAc,WAC5B,IAAIC,EAAaC,EAAEC,MACnBT,EAAiBU,eAAeH,EAAWI,KAAK,aAChDN,EAASJ,MAIXD,EAAiBY,oBAAsB,WACtC,OAAOX,GAGRD,EAAiBU,eAAiB,SAAUG,GAC3C,IAAIN,EAAaL,EAAGY,KAAK,cAAgBD,EAAM,MAC/CZ,GACCY,IAAKA,EACLE,KAAMR,EAAWI,KAAK,cAEvBT,EAAGY,KAAK,4CAA4CE,KAAKT,EAAWO,KAAK,iCAAiCE,SAG3GhB,EAAiBiB,MAAQ,SAAUC,EAAYb,GAC9C,UAAWa,IAAe,WAAY,CACrCb,EAAWa,EACXA,EAAaC,QAAQC,KAAKC,cAE3BvB,EAAWwB,MAAM,6CAChBJ,WAAYA,GACV,SAAUF,GACZjB,EAAWwB,UAAUP,EAAM,SAAUA,GACpC,IAAIC,EAAQO,QAAQC,QACnBC,MAAO,uCACPC,QAASX,EACTY,SACCC,MACCC,MAAO,oBACPC,UAAW,cACX1B,SAAU2B,MAIbhC,EAAiBG,KAAKc,EAAMH,KAAK,oCACjC,SAASkB,EAAOC,GACfA,EAAGC,iBACH,IAAIjC,EAAmBD,EAAiBY,sBACxC,GAAIX,EAAkB,CACrBI,EAASJ,EAAiBY,KAC1BI,EAAMA,MAAM,QAEb,OAAO,MAGRA,EAAMH,KAAK,QAAQR,GAAG,SAAU0B,QAKnC,OAAOhC","file":"public/src/modules/categorySelector.js","sourcesContent":["'use strict';\r\n\r\ndefine('categorySelector', ['benchpress', 'translator'], function (Benchpress, translator) {\r\n\tvar categorySelector = {};\r\n\tvar selectedCategory;\r\n\tvar el;\r\n\tcategorySelector.init = function (_el, callback) {\r\n\t\tcallback = callback || function () {};\r\n\t\tel = _el;\r\n\t\tselectedCategory = null;\r\n\t\tel.on('click', '[data-cid]', function () {\r\n\t\t\tvar categoryEl = $(this);\r\n\t\t\tcategorySelector.selectCategory(categoryEl.attr('data-cid'));\r\n\t\t\tcallback(selectedCategory);\r\n\t\t});\r\n\t};\r\n\r\n\tcategorySelector.getSelectedCategory = function () {\r\n\t\treturn selectedCategory;\r\n\t};\r\n\r\n\tcategorySelector.selectCategory = function (cid) {\r\n\t\tvar categoryEl = el.find('[data-cid=\"' + cid + '\"]');\r\n\t\tselectedCategory = {\r\n\t\t\tcid: cid,\r\n\t\t\tname: categoryEl.attr('data-name'),\r\n\t\t};\r\n\t\tel.find('[component=\"category-selector-selected\"]').html(categoryEl.find('[component=\"category-markup\"]').html());\r\n\t};\r\n\r\n\tcategorySelector.modal = function (categories, callback) {\r\n\t\tif (typeof categories === 'function') {\r\n\t\t\tcallback = categories;\r\n\t\t\tcategories = ajaxify.data.allCategories;\r\n\t\t}\r\n\t\tBenchpress.parse('admin/partials/categories/select-category', {\r\n\t\t\tcategories: categories,\r\n\t\t}, function (html) {\r\n\t\t\ttranslator.translate(html, function (html) {\r\n\t\t\t\tvar modal = bootbox.dialog({\r\n\t\t\t\t\ttitle: '[[modules:composer.select_category]]',\r\n\t\t\t\t\tmessage: html,\r\n\t\t\t\t\tbuttons: {\r\n\t\t\t\t\t\tsave: {\r\n\t\t\t\t\t\t\tlabel: '[[global:select]]',\r\n\t\t\t\t\t\t\tclassName: 'btn-primary',\r\n\t\t\t\t\t\t\tcallback: submit,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tcategorySelector.init(modal.find('[component=\"category-selector\"]'));\r\n\t\t\t\tfunction submit(ev) {\r\n\t\t\t\t\tev.preventDefault();\r\n\t\t\t\t\tvar selectedCategory = categorySelector.getSelectedCategory();\r\n\t\t\t\t\tif (selectedCategory) {\r\n\t\t\t\t\t\tcallback(selectedCategory.cid);\r\n\t\t\t\t\t\tmodal.modal('hide');\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmodal.find('form').on('submit', submit);\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\treturn categorySelector;\r\n});\r\n\r\n"]}