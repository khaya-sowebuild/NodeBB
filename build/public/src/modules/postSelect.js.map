{"version":3,"sources":["public/src/modules/postSelect.js"],"names":["define","components","PostSelect","pids","init","onSelect","length","get","on","togglePostSelection","$","this","disableClicksOnPosts","disable","forEach","pid","toggleClass","off","enableClicksOnPosts","post","callback","newPid","attr","parseInt","index","indexOf","push","splice","sort","a","b","disableClicks"],"mappings":"AAAA,aAGAA,OAAO,cAAe,cAAe,SAAUC,GAC9C,IAAIC,KAEJA,EAAWC,QAEXD,EAAWE,KAAO,SAAUC,GAC3BH,EAAWC,KAAKG,OAAS,EACzBL,EAAWM,IAAI,SAASC,GAAG,QAAS,aAAc,WACjDN,EAAWO,oBAAoBC,EAAEC,MAAON,KAEzCO,KAGDV,EAAWW,QAAU,WACpBX,EAAWC,KAAKW,QAAQ,SAAUC,GACjCd,EAAWM,IAAI,OAAQ,MAAOQ,GAAKC,YAAY,aAAc,SAE9Df,EAAWM,IAAI,SAASU,IAAI,QAAS,cACrCC,KAGDhB,EAAWO,oBAAsB,SAAUU,EAAMC,GAChD,IAAIC,EAASF,EAAKG,KAAK,YAEvB,GAAIC,SAASJ,EAAKG,KAAK,cAAe,MAAQ,EAAG,CAChD,OAGD,GAAID,EAAQ,CACX,IAAIG,EAAQtB,EAAWC,KAAKsB,QAAQJ,GACpC,GAAIG,KAAW,EAAG,CACjBtB,EAAWC,KAAKuB,KAAKL,GACrBF,EAAKH,YAAY,aAAc,UACzB,CACNd,EAAWC,KAAKwB,OAAOH,EAAO,GAC9BL,EAAKH,YAAY,aAAc,OAGhC,GAAId,EAAWC,KAAKG,OAAQ,CAC3BJ,EAAWC,KAAKyB,KAAK,SAAUC,EAAGC,GAAK,OAAOD,EAAIC,IAEnDV,MAKF,SAASW,IACR,OAAO,MAGR,SAASnB,IACRX,EAAWM,IAAI,QAAQC,GAAG,QAAS,WAAYuB,GAGhD,SAASb,IACRjB,EAAWM,IAAI,QAAQU,IAAI,QAAS,WAAYc,GAGjD,OAAO7B","file":"public/src/modules/postSelect.js","sourcesContent":["'use strict';\r\n\r\n\r\ndefine('postSelect', ['components'], function (components) {\r\n\tvar PostSelect = {};\r\n\r\n\tPostSelect.pids = [];\r\n\r\n\tPostSelect.init = function (onSelect) {\r\n\t\tPostSelect.pids.length = 0;\r\n\t\tcomponents.get('topic').on('click', '[data-pid]', function () {\r\n\t\t\tPostSelect.togglePostSelection($(this), onSelect);\r\n\t\t});\r\n\t\tdisableClicksOnPosts();\r\n\t};\r\n\r\n\tPostSelect.disable = function () {\r\n\t\tPostSelect.pids.forEach(function (pid) {\r\n\t\t\tcomponents.get('post', 'pid', pid).toggleClass('bg-success', false);\r\n\t\t});\r\n\t\tcomponents.get('topic').off('click', '[data-pid]');\r\n\t\tenableClicksOnPosts();\r\n\t};\r\n\r\n\tPostSelect.togglePostSelection = function (post, callback) {\r\n\t\tvar newPid = post.attr('data-pid');\r\n\r\n\t\tif (parseInt(post.attr('data-index'), 10) === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (newPid) {\r\n\t\t\tvar index = PostSelect.pids.indexOf(newPid);\r\n\t\t\tif (index === -1) {\r\n\t\t\t\tPostSelect.pids.push(newPid);\r\n\t\t\t\tpost.toggleClass('bg-success', true);\r\n\t\t\t} else {\r\n\t\t\t\tPostSelect.pids.splice(index, 1);\r\n\t\t\t\tpost.toggleClass('bg-success', false);\r\n\t\t\t}\r\n\r\n\t\t\tif (PostSelect.pids.length) {\r\n\t\t\t\tPostSelect.pids.sort(function (a, b) { return a - b; });\r\n\t\t\t}\r\n\t\t\tcallback();\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tfunction disableClicks() {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfunction disableClicksOnPosts() {\r\n\t\tcomponents.get('post').on('click', 'button,a', disableClicks);\r\n\t}\r\n\r\n\tfunction enableClicksOnPosts() {\r\n\t\tcomponents.get('post').off('click', 'button,a', disableClicks);\r\n\t}\r\n\r\n\treturn PostSelect;\r\n});\r\n"]}