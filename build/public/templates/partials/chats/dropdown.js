!function(o){"object"==typeof module&&module.exports?module.exports=o():"function"==typeof define&&define.amd&&define(o)}(function(){function a(o,s,r,m,e){return r(s&&s.rooms&&s.rooms.length)?"\r\n"+a.blocks.rooms(o,s,r,m,e)+"\r\n":'\r\n<li class="no_active"><a href="#">[[modules:chat.no_active]]</a></li>\r\n'}return a.blocks={rooms:function(m,e,a,o){return o(a(e&&e.rooms),function(r){return'\r\n<li class="'+(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].unread)?"unread":"")+'" data-roomid="'+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].roomId))+'">\r\n\t<strong class="room-name">\r\n\t\t'+(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].lastUser&&e.rooms[r].lastUser.uid)?"\r\n\t\t"+(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].roomName)?m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].roomName)):m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].usernames)))+"\r\n\t\t":"\r\n\t\t<span>[[modules:chat.no-users-in-room]]</span>\r\n\t\t")+'\r\n\t</strong>\r\n\t<div class="avatar-placeholder"></div>\r\n\t'+(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].rooms&&e.rooms[r].rooms.users)?o(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].rooms&&e.rooms[r].rooms.users),function(o,s){return"\r\n\t"+(0===s?'\r\n\t<div class="main-avatar">\r\n\t\t<a href="'+m.__escape(a(e&&e.config&&e.config.relative_path))+"/user/"+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].rooms&&e.rooms[r].rooms.users&&e.rooms[r].rooms.users[o]&&e.rooms[r].rooms.users[o].userslug))+'">\r\n\t'+(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].rooms&&e.rooms[r].rooms.users&&e.rooms[r].rooms.users[o]&&e.rooms[r].rooms.users[o].picture)?'\r\n\t<img class="user-img avatar avatar-sm avatar-rounded" src="'+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].rooms&&e.rooms[r].rooms.users&&e.rooms[r].rooms.users[o]&&e.rooms[r].rooms.users[o].picture))+'" title="'+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].rooms&&e.rooms[r].rooms.users&&e.rooms[r].rooms.users[o]&&e.rooms[r].rooms.users[o].username))+'">\r\n\t':'\r\n\t<div class="user-img avatar avatar-sm avatar-rounded" title="'+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].rooms&&e.rooms[r].rooms.users&&e.rooms[r].rooms.users[o]&&e.rooms[r].rooms.users[o].username))+'" style="background-color: '+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].rooms&&e.rooms[r].rooms.users&&e.rooms[r].rooms.users[o]&&e.rooms[r].rooms.users[o]["icon:bgColor"]))+';">'+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].rooms&&e.rooms[r].rooms.users&&e.rooms[r].rooms.users[o]&&e.rooms[r].rooms.users[o]["icon:text"]))+"</div>\r\n\t")+"\r\n</a>\r\n\t</div>\r\n\t":"")+"\r\n\t"}):o(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].users),function(o,s){return"\r\n\t"+(0===s?'\r\n\t<div class="main-avatar">\r\n\t\t<a href="'+m.__escape(a(e&&e.config&&e.config.relative_path))+"/user/"+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].users&&e.rooms[r].users[o]&&e.rooms[r].users[o].userslug))+'">\r\n\t'+(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].users&&e.rooms[r].users[o]&&e.rooms[r].users[o].picture)?'\r\n\t<img class="user-img avatar avatar-sm avatar-rounded" src="'+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].users&&e.rooms[r].users[o]&&e.rooms[r].users[o].picture))+'" title="'+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].users&&e.rooms[r].users[o]&&e.rooms[r].users[o].username))+'">\r\n\t':'\r\n\t<div class="user-img avatar avatar-sm avatar-rounded" title="'+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].users&&e.rooms[r].users[o]&&e.rooms[r].users[o].username))+'" style="background-color: '+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].users&&e.rooms[r].users[o]&&e.rooms[r].users[o]["icon:bgColor"]))+';">'+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].users&&e.rooms[r].users[o]&&e.rooms[r].users[o]["icon:text"]))+"</div>\r\n\t")+"\r\n</a>\r\n\t</div>\r\n\t":"")+"\r\n\t"}))+'\r\n\r\n\t<ul class="members">\r\n\t\t'+(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].rooms&&e.rooms[r].rooms.users)?o(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].rooms&&e.rooms[r].rooms.users),function(o){return'\r\n\t\t<li>\r\n\t\t\t<a href="'+m.__escape(a(e&&e.config&&e.config.relative_path))+"/user/"+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].rooms&&e.rooms[r].rooms.users&&e.rooms[r].rooms.users[o]&&e.rooms[r].rooms.users[o].userslug))+'">\r\n\t'+(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].rooms&&e.rooms[r].rooms.users&&e.rooms[r].rooms.users[o]&&e.rooms[r].rooms.users[o].picture)?'\r\n\t<img class="user-img avatar avatar-sm avatar-rounded" src="'+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].rooms&&e.rooms[r].rooms.users&&e.rooms[r].rooms.users[o]&&e.rooms[r].rooms.users[o].picture))+'" title="'+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].rooms&&e.rooms[r].rooms.users&&e.rooms[r].rooms.users[o]&&e.rooms[r].rooms.users[o].username))+'">\r\n\t':'\r\n\t<div class="user-img avatar avatar-sm avatar-rounded" title="'+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].rooms&&e.rooms[r].rooms.users&&e.rooms[r].rooms.users[o]&&e.rooms[r].rooms.users[o].username))+'" style="background-color: '+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].rooms&&e.rooms[r].rooms.users&&e.rooms[r].rooms.users[o]&&e.rooms[r].rooms.users[o]["icon:bgColor"]))+';">'+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].rooms&&e.rooms[r].rooms.users&&e.rooms[r].rooms.users[o]&&e.rooms[r].rooms.users[o]["icon:text"]))+"</div>\r\n\t")+"\r\n</a>\r\n\t\t</li>\r\n\t\t"}):o(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].users),function(o){return'\r\n\t\t<li>\r\n\t\t\t<a href="'+m.__escape(a(e&&e.config&&e.config.relative_path))+"/user/"+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].users&&e.rooms[r].users[o]&&e.rooms[r].users[o].userslug))+'">\r\n\t'+(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].users&&e.rooms[r].users[o]&&e.rooms[r].users[o].picture)?'\r\n\t<img class="user-img avatar avatar-sm avatar-rounded" src="'+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].users&&e.rooms[r].users[o]&&e.rooms[r].users[o].picture))+'" title="'+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].users&&e.rooms[r].users[o]&&e.rooms[r].users[o].username))+'">\r\n\t':'\r\n\t<div class="user-img avatar avatar-sm avatar-rounded" title="'+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].users&&e.rooms[r].users[o]&&e.rooms[r].users[o].username))+'" style="background-color: '+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].users&&e.rooms[r].users[o]&&e.rooms[r].users[o]["icon:bgColor"]))+';">'+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].users&&e.rooms[r].users[o]&&e.rooms[r].users[o]["icon:text"]))+"</div>\r\n\t")+"\r\n</a>\r\n\t\t</li>\r\n\t\t"}))+'\r\n\t</ul>\r\n\r\n\t<span class="teaser-content">'+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].teaser&&e.rooms[r].teaser.content))+'</span>\r\n\t<span class="teaser-timestamp timeago pull-right" title="'+m.__escape(a(e&&e.rooms&&e.rooms[r]&&e.rooms[r].teaser&&e.rooms[r].teaser.timestampISO))+'"></span>\r\n</li>\r\n'})}},a});